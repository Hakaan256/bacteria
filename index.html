<html>
<head>
<style type='text/css'>
body,div
{
  position:relative;
  overflow:auto;
  margin:0px;
  padding:0px;
  font-family:Helvetica Neue;
  font-size:18px;
}
body
{
}
.convo
{
  width:100%;
  background-color:#FBF0EE;
}
.convo_content
{
  width:824px;
  margin:0px auto;
  padding-top:40px;
  padding-bottom:40px;
}

.chat
{
  width:100%;
  padding-top:0px;
  padding-bottom:0px;
}
.chat_img
{
  width:100px;
  height:100px;
  float:left;
}
.chat_txt
{
  padding-top:20px;
  float:left;
  width:704px;
}

.short_img
{
  background-image:url('assets/jack_circle.png');
  background-size:100px 100px;
}
.tall_img
{
  background-image:url('assets/scout_circle.png');
  background-size:100px 100px;
}
.short_txt
{
  padding-left:20px;
  text-align:left;
}
.tall_txt
{
  padding-right:20px;
  text-align:right;
}

.experiment
{
  width:100%;
}
.experiment_content
{
  width:1024px;
  margin:0px auto;
}

.rules
{
  width:512px;
  height:512px;
  position:relative;
  float:left;
  font-size:16px;
}
.rule
{
  font-style:italic;
}
.new
{
  font-weight:bold;
}
.tall_full
{
  width:130px;
  height:200px;
  margin:0px auto;
  position:absolute;
  bottom:0px;
  background-image:url('assets/scout.png');
  background-size:130px 200px;
}
.stage_container
{
  width:512px;
  float:left;
  overflow:visible;
  user-select:none;
}
.keyword
{
  font-style:italic;
}
</style>
<script type='text/javascript' src='src/config.js'></script>
<script type='text/javascript' src='src/utils/utils.js'></script>
<script type='text/javascript' src='src/utils/webgl-utils.js'></script>
<script type="text/javascript" src="src/canv.js"></script>
<script type="text/javascript" src="src/stage.js"></script>
<script type="text/javascript" src="src/game.js"></script>

<script type="text/javascript" src="src/doqueues/assetter.js"></script>
<script type="text/javascript" src="src/doqueues/clicker.js"></script>
<script type="text/javascript" src="src/doqueues/blurer.js"></script>
<script type="text/javascript" src="src/doqueues/keyer.js"></script>
<script type="text/javascript" src="src/doqueues/debugger.js"></script>
<script type="text/javascript" src="src/doqueues/dragger.js"></script>
<script type="text/javascript" src="src/doqueues/drawer.js"></script>
<script type="text/javascript" src="src/doqueues/flicker.js"></script>
<script type="text/javascript" src="src/doqueues/hoverer.js"></script>
<script type="text/javascript" src="src/doqueues/persistent_hoverer.js"></script>
<script type="text/javascript" src="src/doqueues/presser.js"></script>
<script type="text/javascript" src="src/doqueues/ticker.js"></script>
<script type="text/javascript" src="src/doqueues/particler.js"></script>
<script type="text/javascript" src="src/doqueues/objs/img.js"></script>
<script type="text/javascript" src="src/doqueues/objs/placer.js"></script>
<script type="text/javascript" src="src/doqueues/objs/input.js"></script>

<script type="text/javascript" src="src/scenes/nullScene.js"></script>
<script type="text/javascript" src="src/scenes/loadingScene.js"></script>
<script type="text/javascript" src="src/scenes/testScene.js"></script>
<script type="text/javascript" src="src/scenes/gameplayScene.js"></script>

<script type="text/javascript">
function $(id)
{
  return document.getElementById(id);
}

var d;
var g;
var g_basic;
var games = {};

function size_prefix(w,h,prefix)
{
  $(prefix+"stage_container").style.width  = w+"px";
  $(prefix+"stage_container").style.height = h+"px";
}

function begin()
{
  var prefix = "";
  var w = 640;
  var h = 320;
  //$("debug_div").style.width  = w+"px";
  //$("debug_div").style.height = h+"px";
  //d = new Debugger({source:$("debug_div")});

  prefix = "basic_";
  w = 512;
  h = 512;
  size_prefix(w,h,prefix);
  g = new Game({width:w,height:h,container:prefix+"stage_container",popup:prefix+"popup",
    config:
    {
      special:SPECIAL_NONE,
      grid_x:0,
      grid_y:0,
      grid_w:-1,
      grid_h:-1,
      grid_cols:10,
      grid_rows:10,
      colored_rgb:false,
      default_r:0.5,
      default_g:0.5,
      default_b:0.5,
      colored_hsl:false,
      default_h:150,
      default_s:1,
      default_l:0.7,
      colorblind:false,
      sim_speed:1,
      badb_sim_speed:1,
      allow_sim_speed_slider:false,
      sim_speed_min:1,
      sim_speed_max:2,
      hover_to_play:true,
      display_pause:true,
      allow_dose_slider:false,
      allow_dose_button:false,
      dose_chip_damage:false,
      allow_smile:false,
      allow_reset:true,
      prompt_reset_on_empty:false,
      allow_contaminate:false,
      default_badb_resist:0.,
      init_badb:false,
      reinit_badb:false,
      default_good_resist:0.,
      allow_good:false,
      init_good:false,
      reinit_good:false,
      allow_body:false,
      init_body:false,
      reinit_body:false,
      swab_size:1,
      click_function:CLICK_FUNC_BADB,
      hover_function:CLICK_FUNC_NONE,
      show_hover:false,
      prerequisite_fill_for_interaction:0.,
      prompt_prerequisite_unmet:false,
      mutate_random_assign:false,
      mutate_rate:0,
      mutate_distance:0,
      bias_mutate:false,
      reproduce:true,
      age:true,
      ave_display_width:0,
      split_display_width:0,
      tricolor_display_width:0,
      hsl_display_width:0,
    }
  });
  games[prefix] = g;
  g.begin();

  prefix = "biodiversity_";
  w = 512;
  h = 512;
  size_prefix(w,h,prefix);
  g = new Game({width:w,height:h,container:prefix+"stage_container",popup:prefix+"popup",
    config:
    {
      special:SPECIAL_NONE,
      grid_x:0,
      grid_y:0,
      grid_w:-1,
      grid_h:-1,
      grid_cols:10,
      grid_rows:10,
      colored_rgb:false,
      default_r:0.5,
      default_g:0.5,
      default_b:0.5,
      colored_hsl:false,
      default_h:150,
      default_s:1,
      default_l:0.7,
      colorblind:false,
      sim_speed:1,
      badb_sim_speed:1,
      allow_sim_speed_slider:false,
      sim_speed_min:1,
      sim_speed_max:2,
      hover_to_play:true,
      display_pause:true,
      allow_dose_slider:false,
      allow_dose_button:false,
      dose_chip_damage:false,
      allow_smile:false,
      allow_reset:true,
      prompt_reset_on_empty:false,
      allow_contaminate:false,
      default_badb_resist:0.,
      init_badb:false,
      reinit_badb:false,
      default_good_resist:0.,
      allow_good:false,
      init_good:false,
      reinit_good:false,
      allow_body:false,
      init_body:false,
      reinit_body:false,
      swab_size:1,
      click_function:CLICK_FUNC_BADB,
      hover_function:CLICK_FUNC_NONE,
      show_hover:false,
      prerequisite_fill_for_interaction:0.,
      prompt_prerequisite_unmet:false,
      mutate_random_assign:false,
      mutate_rate:1,
      mutate_distance:0.2,
      bias_mutate:false,
      reproduce:true,
      age:true,
      ave_display_width:0,
      split_display_width:0,
      tricolor_display_width:0,
      hsl_display_width:0,
    }
  });
  games[prefix] = g;
  g.begin();

  prefix = "killbutton_";
  w = 512;
  h = 512;
  size_prefix(w,h,prefix);
  g = new Game({width:w,height:h,container:prefix+"stage_container",popup:prefix+"popup",
    config:
    {
      special:SPECIAL_NONE,
      grid_x:0,
      grid_y:0,
      grid_w:502,
      grid_h:-1,
      grid_cols:10,
      grid_rows:10,
      colored_rgb:false,
      default_r:0.5,
      default_g:0.5,
      default_b:0.5,
      colored_hsl:false,
      default_h:150,
      default_s:1,
      default_l:0.7,
      colorblind:false,
      sim_speed:1,
      badb_sim_speed:1,
      allow_sim_speed_slider:false,
      sim_speed_min:1,
      sim_speed_max:2,
      hover_to_play:true,
      display_pause:true,
      allow_dose_slider:false,
      allow_dose_button:true,
      dose_chip_damage:true,
      allow_smile:false,
      allow_reset:true,
      prompt_reset_on_empty:true,
      allow_contaminate:false,
      default_badb_resist:0.,
      init_badb:true,
      reinit_badb:false,
      default_good_resist:0.,
      allow_good:false,
      init_good:false,
      reinit_good:false,
      allow_body:false,
      init_body:false,
      reinit_body:false,
      swab_size:1,
      click_function:CLICK_FUNC_NONE,
      hover_function:CLICK_FUNC_NONE,
      show_hover:false,
      prerequisite_fill_for_interaction:0.,
      prompt_prerequisite_unmet:false,
      mutate_random_assign:false,
      mutate_rate:1,
      mutate_distance:0.2,
      bias_mutate:false,
      reproduce:true,
      age:true,
      ave_display_width:10,
      split_display_width:0,
      tricolor_display_width:0,
      hsl_display_width:0,
    }
  });
  games[prefix] = g;
  g.begin();
}
window.addEventListener('touchstart', function(e){ e.preventDefault() }); //prevent browser from doing anything funny
window.addEventListener("load",begin,false);
</script>

</head>
<body>

<div id="header" style="height:400px; width:100%; background-image:url('assets/bacteria-header.jpg'); background-position:center; background-size:100%;">
  <div style="width:1024px; margin:0px auto;">
    <div style="padding:50px;">
      <div style="font-size:60px; color:#FFFFFF;">ANTIBIOTIC<br/>RESISTANCE.</div>
      <div style="color:#FFFFFF;"><img src="assets/icon-rocket-white.png" style="width:50px;"></img>AN INTERACTIVE EXPLORABLE</div>
    </div>
  </div>
</div>

<div class="convo">
  <div class="convo_content">

    <div class="chat short">
      <div class="chat_img short_img"></div><div class="chat_txt short_txt">How can antibiotics be dangerous? I thought they made you better!</div>
    </div>
    <div class="chat tall">
      <div class="chat_txt tall_txt">Antibiotic resistance!</div><div class="chat_img tall_img"></div>
    </div>

    <div class="chat short">
      <div class="chat_img short_img"></div><div class="chat_txt short_txt">But what <i>is</i> antibiotic resistance?<br />Why is antibiotic resistance bad? What can we do about it?</div>
    </div>
    <div class="chat tall">
      <div class="chat_txt tall_txt">Tell you what, let's create a model to help us explore these questions.<br />Even though bacteria come in many shapes, in our model, they can be represented by squares.</div><div class="chat_img tall_img"></div>
    </div>

  </div>
</div>

<div class="experiment">
  <div class="experiment_content">
    <div class="rules">
      <br />
      <br />
      <br />
      <b>Neat. This simple model is based on these key ideas:</b><br />
      <br />
      <span class="rule">- Bacteria sometimes reproduce, dividing to make more.</span><br />
      <br />
      <span class="rule">- Bacteria eventually die.</span><br />
      <div class="tall_full"></div>
    </div>
    <div class="stage_container" id="basic_stage_container"> </div>
  </div>
</div>

<div class="convo">
  <div class="convo_content">

    <div class="chat short">
      <div class="chat_img short_img"></div><div class="chat_txt short_txt">I don't think our model seems very realistic. How can we make our model more realistic?</div>
    </div>
    <div class="chat tall">
      <div class="chat_txt tall_txt">Good point. We'll add the concepts of inheritance and mutation to our model. Every trait, or characteristic, of a bacterium (such as its shape, size, and behavior) is encoded in its genetic material - its DNA. Most bacteria reproduce simply by dividing in two, with copies of its DNA in each new cell. Sometimes the process of DNA replication doesn't make a perfect copy, and the DNA is not quite identical. This results in differences between the new bacterium's traits and those of the parent - sometimes small, and sometimes drastic. These differences are called mutations.</div><div class="chat_img tall_img"></div>
    </div>
    <div class="chat short">
      <div class="chat_img short_img"></div><div class="chat_txt short_txt">What will that look like in our model?</div>
    </div>
    <div class="chat tall">
      <div class="chat_txt tall_txt">Hmm... what trait can we use to model how mutations occur and are inherited? Aha! We can use a slight color difference to model a mutation. In our model, we'll let some bacteria mutate by changing color value - the lightness or darkness of the color. We'll allow the new color to be inherited during reproduction.</div><div class="chat_img tall_img"></div>
    </div>

  </div>
</div>

<div class="experiment">
  <div class="experiment_content">
    <div class="rules">
      <br />
      <br />
      <br />
      <b>Biodiversity!</b>
      <br />
      Our new model is based on these key ideas:<br />
      <br />
      <span class="rule">- Bacteria sometimes reproduce, dividing to make more.</span><br />
      <br />
      <span class="rule">- Bacteria eventually die.</span><br />
      <br />
      <span class="rule new">- Bacteria offspring inherit the traits of the parent.</span><br />
      <br />
      <span class="rule new">- Mutations in bacteria DNA can occur.</span><br />
      <br />
      <span class="rule new">- Mutations can be inherited by a bacterium's offspring.</span><br />
      <div class="tall_full"></div>
    </div>
    <div class="stage_container" id="biodiversity_stage_container"> </div>
  </div>
</div>

<div class="convo">
  <div class="convo_content">

    <div class="chat tall">
      <div class="chat_txt tall_txt">Notice how, in our model, mutations lead to small communities of bacteria similar in color value - this looks like lighter patches and darker patches.</div><div class="chat_img tall_img"></div>
    </div>
    <div class="chat short">
      <div class="chat_img short_img"></div><div class="chat_txt short_txt">Wait, how is this related to antibiotic resistance?</div>
    </div>
    <div class="chat tall">
      <div class="chat_txt tall_txt">Antibiotics are substances known to have bacterium-killing properties. A bacterium develops antibiotic resistance when mutations combine to make it hard to kill. When a bacterium has antibiotic resistance, it is more likely to survive even when antibiotic substances are present.<br /><br />Antibiotic resistance is an inheritable trait. If a bacterium cannot survive, it cannot reproduce. And if a bacterium has antibiotic resistance, it can survive to reproduce, passing this trait on to its offspring! Of course, not all of the new bacteria will have antibiotic resistance. Some will have additional mutations that weaken resistance. What do you think will happen to these weaker bacteria when additional doses of antibiotic are applied?</div><div class="chat_img tall_img"></div>
    </div>
    <div class="chat short">
      <div class="chat_img short_img"></div><div class="chat_txt short_txt">Yikes. I don't know. Can we use our model to find out?</div>
    </div>
    <div class="chat tall">
      <div class="chat_txt tall_txt">Sure, let's add the trait of antibiotic resistance to our model! We'll update the simulation to use color value to represent antibiotic resistance - the darker the bacterium, the more resistant it is to antibiotics. Then, we'll add antibiotics to the population with a button.</div><div class="chat_img tall_img"></div>
    </div>

  </div>
</div>

<div class="experiment">
  <div class="experiment_content">
    <div class="rules">
      <br />
      <br />
      <br />
      <b>This model is based on these key ideas:</b><br />
      <br />
      <span class="rule">- Bacteria sometimes reproduce, dividing to make more.</span><br />
      <br />
      <span class="rule">- Bacteria eventually die.</span><br />
      <br />
      <span class="rule new">- Bacteria offspring inherit the traits of the parent.</span><br />
      <br />
      <span class="rule">- Mutations can be inherited by a bacterium's offspring.</span><br />
      <br />
      <span class="rule">- Bacteria can have the trait "antibiotic resistance".</span><br />
      <br />
      <span class="rule new">- Bacteria with greater antibiotic resistance are harder to kill.</span><br />
      <br />
      <span class="rule new">- Bacteria can pass on their antibiotic resistance to offspring.</span><br />
      <div class="tall_full"></div>
    </div>
    <div class="stage_container" id="killbutton_stage_container"> </div>
  </div>
</div>

<div class="convo">
  <div class="convo_content">

    <div class="chat tall">
      <div class="chat_txt tall_txt">Notice how, in our model, mutations lead to small communities of bacteria similar in color value - this looks like lighter patches and darker patches.</div><div class="chat_img tall_img"></div>
    </div>
    <div class="chat short">
      <div class="chat_img short_img"></div><div class="chat_txt short_txt">Wait, how is this related to antibiotic resistance?</div>
    </div>
    <div class="chat tall">
      <div class="chat_txt tall_txt">Antibiotics are substances known to have bacterium-killing properties. A bacterium develops antibiotic resistance when mutations combine to make it hard to kill. When a bacterium has antibiotic resistance, it is more likely to survive even when antibiotic substances are present.<br /><br />Antibiotic resistance is an inheritable trait. If a bacterium cannot survive, it cannot reproduce. And if a bacterium has antibiotic resistance, it can survive to reproduce, passing this trait on to its offspring! Of course, not all of the new bacteria will have antibiotic resistance. Some will have additional mutations that weaken resistance. What do you think will happen to these weaker bacteria when additional doses of antibiotic are applied?</div><div class="chat_img tall_img"></div>
    </div>
    <div class="chat short">
      <div class="chat_img short_img"></div><div class="chat_txt short_txt">Yikes. I don't know. Can we use our model to find out?</div>
    </div>
    <div class="chat tall">
      <div class="chat_txt tall_txt">Sure, let's add the trait of antibiotic resistance to our model! We'll update the simulation to use color value to represent antibiotic resistance - the darker the bacterium, the more resistant it is to antibiotics. Then, we'll add antibiotics to the population with a button.</div><div class="chat_img tall_img"></div>
    </div>

  </div>
</div>


</div>

</body>
</html>

